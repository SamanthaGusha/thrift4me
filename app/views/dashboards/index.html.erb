<div class="container">
  <h1>My Dashboard</h1>

<!--  <h3>My Rentals</h3> #for the rentee to see the clothes they are renting rn
  Rentee dashboard content-->
  <%# unless current_user.renter %>
    <%# @active_rentals.each do |clothing| %>
<!--      <p><%#= clothing.title %></p>
      <p><%#= clothing.description %></p>
      <p><%#= clothing.rental.user_id %></p>
    <%# end%>-->
  <%# end %>

  <!-- Renter dashboard content-->

<!--#for the renter to see which of their clothes are being rented out-->
<!--<h3>My Rented Items</h3>-->
  <%# if @pending_rentals %>
    <%# @pending_rentals.each do |rental| %>
<!--      <p><%#= rental.clothing.title %><p>
      <div class="border-t border-gray-200 py-6 px-4 sm:px-6">
        <button type="submit" class="w-full bg-indigo-600 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white">Accept</button>
      </div>
    <%# end %>-->
  <%# end %>
  <%# @active_rentals.each do |rental| %>
<!--    <div>
      <p>Clothing Name: <%#= rental.clothing.title %></p>
      <p>Status: <%#= rental.status %></p>
    </div>
  <%# end %>-->
<!--</div>-->

<h1>My Dashboard</h1>

<% if @selected_dashboard == 'my_rentals' %>
  <h2>My Rental Requests</h2>
  <% if @rental_requests.any? %>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Clothing</th>
          <th>Renter</th>
          <th>Status</th>
          <th colspan="2">Action</th>
        </tr>
      </thead>
      <tbody>
        <% @rental_requests.each do |request| %>
          <tr>
            <td><%= request.clothing.title %></td>
            <td><%= request.renter.email %></td>
            <td><%= request.status %></td>
            <td>
              <% if request.pending? %>
                <%= button_to "Accept", update_request_path(id: request.id, action: 'accept'), method: :post, class: "btn btn-success btn-sm", data: { remote: true } %>
              <% end %>
            </td>
            <td>
              <% if request.pending? %>
                <%= button_to "Reject", update_request_path(id: request.id, action: 'reject'), method: :post, class: "btn btn-danger btn-sm", data: { remote: true } %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>You don't have any rental requests yet.</p>
  <% end %>
<% elsif @selected_dashboard == 'rented_items' %>
  <h2>Rented Items</h2>
  <% if @rental_requests.any? %>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Clothing</th>
          <th>Renter</th>
          <th>Rental Dates</th>
        </tr>
      </thead>
      <tbody>
        <% @rental_requests.each do |request| %>
          <% if request.accepted? %>
            <tr>
              <td><%= request.clothing.title %></td>
              <td><%= request.renter.email %></td>
              <td><%= "#{request.rental_start_date} - #{request.rental_end_date}" %></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>You don't have any rented items yet.</p>
  <% end %>
<% end %>

<h2>Past Rentals</h2>
<% if @past_rentals.any? %>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Clothing</th>
        <th>Renter</th>
        <th>Rental Dates</th>
      </tr>
    </thead>
    <tbody>
      <% @past_rentals.each do |request| %>
        <tr>
          <td><%= request.clothing.title %></td>
          <td><%= request.renter.email %></td>
          <td><%= "#{request.rental_start_date} - #{request.rental_end_date}" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>You don't have any past rentals yet.</p>
<% end %>

</div>
